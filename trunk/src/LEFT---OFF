This file is for random notes and specific coding tasks that need to be done
to meet various goals. This includes Roadmap items as well as fixing bugs.
List bug tracker number if any.

When an item is satisfied, put it in the DONE section at bottom of file.
Those are purged with each release.



--------------bugs: things that do not work like they are already allegedly designed to---------------------


---- bugs to fix right now:

Printing only goes to letter, even though page size says go full page, in image, pdf and ps out!!! *(#@*&#*(&*&$(

file format dump is not showing dump of object types

laidout import, does not appear to scale correctly, does odd scaling, and inserts unneccesary layers

drawing partial arcs broken

tooltips work intermittently

switch to None document, and units change to unreasonable

test-tiled-mark.laidout: delete the bars, add bars back then try to export, program stops (not a segfault)!!!! headwindow gets decremented somehow

viewwindow, change to spreadview, change back to view.. Horizontal ruler origin is REALLY off

select none, select doc, viewport jumps around... it should stay the same area


---- bugs:

html dump must convert chars to entities

need to implement scale pages to new imposition when reimposing (enable in doc settings dialog)

svg coord numpoints==0???? numpoints doesn't really serve any purpose other than debugging, but....

spiltwindow cursors existing in subwindows

copy paste not working again

hedron edit goes to netdialog, should have "current" option...

object tool shift-control for rotate does not allow positioning on drag bars

'g' for color sample changes cursor to cancel now, and changes on border cross!!!

possible modifier-pairing error with multiple mice...

do laidout -n letter, split a window, then quit. undeleted Objects remain!

recent files do not appear to be most recent file opened

object deleting funky, import svg images, select one, hit delete, doesn't delete!!
place 3 images, object select, must press delete twice...!?!?!?!

should not be able to group select an object and another object nested within

transparency in paths does not work on screen

file previewer not updating preview when using arrow keys

create new window, defaults to no doc. should select doc of last pane

add blank image, change description, do not change filename, makes width/height zap back to 0...

shrink image lets you go immeasurably small

fold indicator foldprogress just at crossover points incorrectly indicating affected folds

pixels units should be set as per document dpi

svg to coord incomplete
memory hole in svg in? test svg import, svg path import must be done

net extra scaling non-functional

make sure all imposition types are available in interpreter

resource impositions not showing description when selected

GradientInterface problem rendering radial when two circles separated by large distance

Laxkit::MultiLineEdit needs some serious debugging

headwindow swapping is now REALLY messed up
pane swapping/dropto on maximized, swapping in general...

WATCH OUT for when preview file is OLDER than original file!!


----------------0.094 ROADMAP ITEMS: features and enhancements------------------------

add more explicit lpoptions howto for help, in lieu of functional print dialog

debug multi head? seems to crash when showing with projectors plugged in
	screen info should return x,y,w,h, with flag saying it is part of a whole.
	if only one screen, then x,y is 0

calculator
  overloading does not handle parameter mapping per overloaded, it is scanning only the first, and using that
  show overloaded entries
  show (variable) should show the objectdef for that variable
  debug class definitions
  debug operator definitions
  debug if/while/etc
  how best to allow created object defs to be referenced as parameter, variable, or set types
  debug using and import... remove using, use import Math.* instead
  need "print" function
  debug number deref: var a={1,2}.. out of bounds not returning cannot deref.. returning "Ok"
  var a if a already exists should fail
  error reporting up function calls doesn't say pos/line for each expression
 
  DONE debug if {a=2, b=3} or {a:2, b:3} or {a:2; b:3}, then scan in hash instead of set
  DONE 1/0 crashes
  DONE assignment still off, need to be able to do a.x=3;
  DONE debug function definitions
  DONE skipBlock does not obey // and /**/ commenting
  DONE a=(1,2); a.x crashes
  DONE show Laidout.Affine should show all fields
  DONE debug name lookup, assignment, etc
  DONE debug things like "show Math.sin"  --> is looking in scope namespace, rather than entries
  DONE allow // or /*comments*/ ?
  DONE AddName seems to work unevenly
  DONE change toCChar() and CChar() to int makeStr(char *&buffer,int &len, int oktoreallocate);

Spread Editor:
  insert blanks
  delete pages, the other right click menu options
  Insert page before
  Insert page after
  Insert pages...  <- on screen indicator for number of pages to add before or after
  modify page labels gui, double click on a page label, where ever it might be... select pages in spread editor
  background preview rendering for spreadeditor

customizable object child relationships to parent, rather than simple transform
  transform relative to parent origin
  transform relative to alignment point of parent (50,50) for center, for instance
  transform relative to absolute point other than origin, as a function of parent?
  	 --> like parent->getanchor(id), getbasisanchor(id)

make pdf default output format for sending to lp

custom tools:
  scripted
  normal tools, but jump to special settings for those tools..

hedron window:
  send imp
  receive imp
  need to draw other nets in outline (at least) in paper view
  need to preview sides on hedron
  memory hole in polyptych
  DONE proper units for papers

update fileformat.txt
polyptych site?
check laidout.1 when time to release
update docs to have new release number
update translations
update screenshots
test:
  each window type, include help and about
  each export filter
  make some test scripts for command line testing

align tool:
  explode in normal align
  should be able to scale and rotate a non-line path when not in path mode
  need manual mode.. drag grid marks to position manually... have that option available on others, auto transform to auto
  gap looks ugly.. have indicator highlight path itself, drag that around
  would be VERY handy to be able to recall previous arrangements, so you can partially redo 
  final layout options: unoverlap -> possibly snap to path, then spread out on path to not overlap
  extra custom finishing per object?
  reorder on layouts? -> how to handle reorder in gap and unoverlap?
    trace out order path... show with numbers
  drag out path, order of intersection is new object order?
  maybe grid drag control to reorder
  snapping to 0/50/100
  number box while dragging, goes away after a second, or click on it to edit
    if inc/dec arrows, have it inc or dec the decimal place cursor is on
  default presets: inkscape crossover

nup:
  flowed
  unclump
  unoverlap -> define strategy, either shift H, Vert, along v, or shift on axes between objects
  object reorder
  scale panel should allow mpx and control zoom around point

for range on import/export, should have a range parser that accepts unconnected ranges, ie "2,4, 5-10"

make a Change imposition, versus Edit imposition, to allow jumping straight to default editor for imposition type

need laidout import

paperinterface: in spread editor (done), and able to print it out, don't forget to remove DBG for release!
pdf optimize jpg dump, compress image data

PathEditor: 
  shift click down then up on a point selects then deselects
  draggable width changer
  copy and paste
  cut segment
  maybe dotted connection if only both end points selected, click connection to close?
  maybe control when on vertex will create whichever handle does not exist, control nearest drag point determines which is created
  make straight bez
  make straight line
  not show every single handle. only ones associated with active vertices, show unactive vertices with small circles
  align nodes -> create temp set of data to pass to AlignInterface?
  transform handles for nodes, including flip
  subdivide, repeat key press restores old segment, then adds 1 more point to num of points from last press
  toggle between add points / select points?
  finish new path/pathoperator/pathsubinterface/pathinterface structure


Scribus:
  import/export color meshes, for recent versions of Scribus
  import/export linear and radial gradients
  scribus in/out: font sizes, stroke widths
  import should try to apply the Scribus layout correctly, at least for 2 page spreads
  import should do something meaningful with original Scribus page bleed values

in number edit boxes, wheel should allow changing numbers, change on digit mouse is over!
  is it better to wheel at curpos?? probably.. select that digit, must track after changes!!!

paperinterface:
   options to show order of papers, print all of one size paper first? auto sort order by size? auto wrap image?
   Load, save, add, delete paper groups
   papergroups:
    work out scheme for resource ownership: they can be owned by:
      1.DONE  Document: if no project, save with document by default
      2.DONE  Project:  save in project file
      3.or Global resource: save in ~/.laidout/version/papergroups
          class FileRef 
        papergroup->owner=Document, Project, or FileRef
   paperinterface:
     no doc, define papergroup, convert papergroup to singles pages?
     orient viewport to paper
     snap other papers to various boxes
     double click to edit paper details
     in spread editor (done), and able to print it out
     more versatile size control per paper
     edit window? should be edit on screen....
        Name:  default single letter
        Paper: Letter, 8.5/11, landscape
        Box: Media [v]   Box: Clip [v]
                            [ ] None
           0 0 8.5 11       X: 0   Y: 0
                          W: 8.5 H: 11
        [delete paper type][new paper type]

saving when net is internal is not proper.. does not distinguish between diff. nets and whole

import config generic things like enum keepmystery should be parsed when no import config given!!

impose-only needs setting page number so as to export and possibly spawn podofoimpose easily

in laxkit, key and mouse state should already be filtered to only contain laxkit modifiers,
reserve names for CommandMask (macs), and a few other custom masks for other weird keyboards

shortcuts:
  char names for wacky xf86 codes.. accept 0x*
  numberpadmask?
  shortcut edit dialog

need createImportConfig/createExportConfig to make ImportConfig/ExportDocumentConfig objects
from parameters for all filters....

make "make uninstall" work, and remove coop 

move impose-only attributes to newdoc/export dialog or otherwise somehow give access to all imposition stuff
	feed it an ExportConfig

finish implementing all options for reimpose function

overwrite should return to file dialog if no

scribus out doesn't do gradients

bleeding mechanism should be functional

option to use different go/don't go colors

for help, need some standardized way to list mouse actions!!

plugin for easy antiprism import

implement marks:
  bleed marks
  color bars from a palette
  spread info: spread type, current date and time, creator, spread number/total number of spreads

animated beacons for anchor points to make them visible

double click on group should change selection area to group contents?
    need to clarify how grouping operates. Perhaps implement sets at same time
    clearCurobj() with skim to group for group->double click?

Svg: in/out of meshes

add --experimental option to activate any crash prone features not otherwise available

object select, 'a' toggle select or not, select all in current selection area (ie page or layer base)

'm' should be able to move whole groups, means must be in object tool?

For objects that appear very small, the drag handles should not be operable.. shift only

Singles::gapx,y should work, BUT by .093, singles will be worked up a bit, and paper partitioning
will likely be very different

When there are errors or warnings in exporting, should be able to have the error log such that
  you can just jump to the offending bit easily. This would also be used for preflight verifiers,
  and maybe also mass edit things, like edit all images..
  - have ViewWindow::JumpToObject(&place, objectid);	

sig editor:
  be able to enter numbers
  mouse over and drag show numbers on canvas
  you should be able to visually adjust the paper size in sigeditor graphically, by automatically
    selecting larger papers, or adjusting the paper edges
  detect non staplable binding edge, show red rather than green

messages to the status line should have priorities, so once mouse over messages are cleared, it would revert
  back to a lower priority message

should have easy way to save as a template

when you try to open anything in ~/.laidout/*/templates, then it should open as a template 

select region by intersect, not by corner inclusion...

text window controls have difficulties

Object tool:
  maybe show flip and 90 deg rotate handles only when mouse outside the selection area?
  control-move flip line to snap to horizontal, vertical, 45 deg, or common gravity points


action/shortcut selector overlay


NetImposition needs import/export net,
    export svg
    convert to/from laidout elements
    DONE import obj files
    DONE  import 3-d models such as from OFF files
    DONE gui for above -> select file in creation dialog

ImageImport dialog: (actually, needs a total redesign)
  DONE  file bookmarks!!!!! NOW!! auto one for examples, or save as template
  Choose/Review tabbed window
  horizontal stack frame between choose/review and preview window
  fancier path selector
  for preview field, show green or something and change tooltip if preview will get generated
  click on file to preview file, preview to preview preview
  generate image previews progress box...
  autogenerate should do special check for ~/.thumbnails to conform to freedesktop spec size and type...
  importimages-> eps --> they are fit into boxes!! they should maybe be inserted into a stream..


dynamic objects (generated images, dynamic images, rendered images)
    eps objects to pdf: export as image, plant in PDF as image
    group objects with laidout elements, updateable with script
    image objects using ImageImportFilters
    perhaps add TEX_BIN, LATEX_BIN, and text editor to quickly add stuff like that!!
    external commands:
      website to recommend learn more
      needs what type of file
      needs how many files
      needs what other info
In image properties dialog, have the popup list of potential previews
    preview style needs debugging and testing so as not to fry the freedesktop ones
if you change an eps to a non eps with the insert file, it still thinks it is an eps..
 image objects should auto change between the available image formats:
  bitmap--eps--embedded svg--dynamic
  Dynamic Content:
    displayed as images, or displayed as group of laidout objects
    possibly multiple images or objects in linked list:
      one source creates multipage ps, for instance, each page gets its own object
    controller source object:
      generator command + context
   examples:
    ps/tex/pdf/etc to eps files, import the eps files
    broken down equirect panorama to net
Image import chain:
  1. eps|EPS: Laidout builtin
  2. svg|SVG: inkscape command line export
  3. other external renderer: asymptote, structure synth, sunflow, pov-ray, lilypond, latex, graphviz, gnuplot
  3. * images: graphicsmagick
  4. jpg, png, gif, tiff: Imlib2

Finish implementing project based setup, particularly being able to save a project, not just load one   
    need option to choose midstream to save as project, or individual documents
    DONE separate project->filename from project directory, in case you just want a
            convenient project file floating around without the whole mess of a project directory..
            either that, or zip up the project directory inside the "project file"..
    collect for out type of option
    finish generic style edit window for quick dialog creation
    need to puzzle out decent way to build dialogs, maybe have dialog building hints embedded in the styledefs
    (temp) iron out what happens on ^s and ^+s, and where docs get saved: with project or otherwise
     New Proj:
       DONE  must create Project Directory...
       DONE  new documents should default to saving in that directory
       TEST if file is in project dir, then path is saved relative, else is absolute
       saving not saving windows properly
       Always copy outside files to project directory
       [help] ---> pop up brief explanation of what a project entails
     Load/Save: (mixed documents and projects)
       DONE  open as copy button (just like templates)
       DONE  [Open][Open as a Copy]
       preview laidout Doc and Project files: show some info about them...
         Project: Some_Project.laidout, 1 day old
         Project: Someotherproject,     5 days old
         Document: Some Doc
         Document: Some other doc
       remember this many recent: __20__


When importing from an image list file, should be able to say if and when to auto-make previews
    new option in file, should be easy

mystery data enhancement: import as placeholder objects: if convertible to laidout elements, do not actually
                expose them as such. Keep source in external location, current laidout only rearranges.
                  ---> this is same as import as image, but using laidout objects to render them with, not bitmap images
                  ---> this is useful to have a standard object indicator built from laidout objects, but
                         do not let them be editable

need to implement more options for polyhedron connections, to allow mobius strips...

really should have option to separate or merge resources when multiple documents open, rather than
always merge?

papersizes are not translated. Should they be??


>show
Laidout:
 ImportFilters:
  SvgImport
  PdfImport
 ExportFilters:
  SvgExport
  PdfExport
 Impositions:
  Net
   Dodecahedron
   Box
  Singles
  DoubleSidedSingles
  Booklet
 Papersizes:
  Letter
  Legal

how best to integrate Styles, Attributes, and Values??? style types:
 Laidout
 Project
 Document
 Page
 Group
  draw objects: Image, ImagePatch, Paths, Path, LinearGradient, RadialGradient, PatchGradient
 PaperGroup
 PaperType
 Imposition: Singles, DSS, Booklet, Signature, Net:Box, Dod, etc...
 ImageImportFilter
 ImportFilter:svg,ppt,sla,ps,eps,odraw
 ExportFilter
-->Styles are Values that can be cascaded from other Styles
   Values cannot be cascaded
-->C++ classes represent data that can be accessed and modified through:
     onscreen
	 file saved to disk
	 interpreter
   would be advantageous to write a single object def, and output options and documention to
   each of the 3 targets

Tools should remember their settings
    figure out which settings need to be remembered, and install as resource.. what happens when diff
     windows are using diff tools? which settings are remembered? have tool styles that are saved, as
     well as the running tool use settings

Net imposition interactive unwrapper and build net interface figure out bleeding and connectivity infrastructure
    figure out more efficient clipping of Imlib images

global resources:
  current frame/time
  current language, for conditional text

external tools:
  to image renderers
  to object renderers
  Image editor (gimp, krita)
  plain text editor (gvim, console vim, command, etc)
  associate (object type) <-> (external editor)

> laidout blah.laidout...     <-- if starting like this, if blah.laidout does not exist, then abort
> laidout 1.laidout 2.laidout <-- if starting like this, if either exist, then start up, but have 
                                    warning message that one document failed to load?
	-> could have a cosumable interface? show a message until the box is clicked on, then it removes itself?

textobjects,limbos,papergroups should maybe be able to be stored per document, not just file, project, or temp
either that, or do away with whole project/document difference, and use only 
projects with their own directory, and projects without their own directory
                                    
more bash like features for command pane

integration of page label gui with spreadeditor, select pages, pop up the dialog?

Selected region out to image(s), regions optionally remembered
    rectangle or path?

import/export styledefs should use the extendsdef mechanism!!!

Soup up the color box so one can recall previous colors, and/or integration with palette window
    -->delay until proper color implementation in place

plain text edit window specify interpreter to process the text with

filters:
  svg out: radial:transparent inner circle, patch
             patch edges
  remember last export

Masking
    pathinterface conversion must be done
    true object tree with all lax data objects subclassed to hold children, and reference parent

Clean up mesh/patch controls
changing recurse and rendermode in patch controls doesn't change that setting in the instance that does random rendering!!
 need infrastructure to propagate and save tool settings
pointin should check to visual boundary, not bounding box

perhaps split radial and linear gradients to different tools? makes more sense

all at once imposition... this would allow mapping of scribus layout without fuss. that
  could be a special case of n-up, where you specify n to be infinity, with m number of
  columns, not necessarily aligned, as scribus does.

pagerangeinterface: need overlay close box.. need to add feature to ViewerWindow to have not
				    just tools but overlays. Any number of overlays can be active, but only one tool
  edit base in place
  should not be able to shift overlay offscreen entirely.. maybe if dragging offscreen, minimize on corner?
  should remember old label format strings, to easily select back to them

For objects that are really skinny, it is not practical to have the handles be a percentage of the skinny
  part.. should have minimum drag areas?

from laxkit: clear up focus handling which currently REALLY SUCKS especially when dialogs are up
    focus off a dialog, then refocus, must manually set control focus. should store which subwindow
     gets the focus when autofocused.

searchable menus


===================Anything below here probably needs discussion before implementing================
---------------------------------- other enhancements ----------------------------------
how to keep track of class hierarchy? impositions are now listed by resource instance, what is
  best way of keeping track of base imposition classes? this is needed for file format description output

for translations, there is a difference between locale translations and language translations!
  not sure if it is worth paying attention to... need to investigate if locale as it affects keyboard input
  is separate from what locale we read in translations from. If it is distinguishable, that is fabulous, in that
  we can maintain the current locale key input, but change the language translation at will...

investigate pdfcreator as method to reduce file size

distribute tool

n-up tool

repeater tool on path: could be adapted to help animation tweening

DumpImages within Arrangements, which are sort of a template of rect regions (2-d guides)
    would also implement the dump into Limbo
	dump into any string of objects, this is really the same thing as laying out a stream, maybe merge this?

gradient resources
  owner: file/user global/system global
  name
  tags
  color strip: stops
    position
    color

measure tool.. configure measurements to be:
 displayer units
 object units
 units mapped to either type of units, so can use light years for units that are actually inch physical paper units
have arrows, and write on screen what the size is...

impositions:
  for printing/exporting non-paper layouts, should have option to specify what sort of paper
   or paper net is proper to hold the layout... means:
   paperstyle=imposition->Paper(layout);
   imposition return a spread with flag for if papergroup is for printing or printing and viewing

importimages: remember last settings

Laidout file preview: give a few relevant info bits, by parsing only part of the file

object selection:
 shift on a selected object should remove that object from selection
 would be nice to show what would be selected during rect-dragout
change object that is part of group object does not force remap of bbox of group

clean up and test:
--export-options format  List all the options for the given format
--print  'from=3; to=32; layout=pages; printer=epson-usb/matte360'
  same as:
--export 'filter="Postscript LL3"  from=3  to=32  layout=pages  command="lp -d epson-usb/matte360"'

pdf export:
 page labels

Import image list: default previews


export with limbo, and no doc or papergroup, means use bounding box for limbo?


when importing, have MysteryData, which has special attributes "@file-pos" which says
 where in the original file the attribute starts:
 MysteryData
   transform/bounds
   title (shown in screen)
   description
   file format the data is from
   attribute style listing of the object? or straight from file
 in: convert file to attributes, or provide method to tailor to an output format (eps, pdf objs, raster image),
         and provide a preview image or object to stand in for the file..


limbo transform should be obeyed. It can be moved, scaled, etc,
page layers should be simplified, each layer behaves according to its transform, and more controls inserted to handle layer maneuvering

impositions:
 Name                  Abbr.       Folds     Leaves    Pages
 Folio                  fo, f        1         2         4
 Quarto                 4to          2         4         8
 Sexto, Sixmo           6to, 6mo     3         6        12
 Octavo                 8vo          3         8        16
 Duodecimo, Twelvemo    12mo         4        12        24
 Sextodecimo, Sixteenmo 16mo         4        16        32

Net:
 save different setups: papertile AND net layout
 load save nets from: 1.net files or 2.OFF files(done)

LaxFiles::ColorAttribute()
default: make list of as many as there are in segment, if name has 'f' then assume float,
 if lettersNumber, then number is num of bits UNLESS it is 100
general: rgb     65535 0 0
         rgb_8   255   0 0
         rgb_100 100.0 0 0
         rgba_8  255   0 0 255
         rgb_16  65535 0 0
         rgba_f  1.0 0 0 1.0
         gray    65535
         graya_f 1.0 1.0
         cmy
         cmyk
         cmykaf
         hex    ffff0000ffff
         hex8   ffffff
         rgbx   0xffffff

need conversions: gradient->color patch
                  image -> imagepatch
                  imagepatch -> image
                  colorpatch -> image?

remember tool settings: double click on tool icon? right click...
remember tool settings

configurable command buttons to automate certain things with minimal window clutter....

int SomeData::Compatible(const char *withwhat)
NO!!!!! compatibility should be determined by object type managers, not individual objects
return if object is currently compatible with some standard, 
like "PS LL3", "EPS 3.0", "SVG 1.2", "PDF 1.3", "PDF 1.4" "HTML/CSS2"
1==yes, straight out
2==yes, but needs rasterizing
this would simplify preflight checking

dump OUT an image list? Scribus has "review images" feature.. can jump to location, edit print/view, etc

Saving: multiple documents open, save only the headwindows that refer only to that doc,
OR save no window configs (saved with project), OR save custom configs

directory reorganization?
 windows/ <-- purely ui elements
 core/ <-- implies isolating core functions


put all in Laidout namespace?



paper tiler: for custom pages, drag out a paper size

intl support: ready for pango?

template/master pages: 
 have objects be tagged with ref object, so you can create a page with a master page
  that has a "text frame" for instance, but different children per page

rulercornerbutton:
  Insert v
    Pagetemplate1
    template2

a "Place" tool like indesign?? preview images and place by dragging out one by one, as well
 as optionally into Arrangements

figure out Scribus' PS importer!! how the hell does it do it, and why does it not do everything?

NetImposition:
    import/export cff2?
    export vrml? pdf 1.6?




======================================DONE=================================================
When releasing new version, combine these with ROADMAP items for release notes.
These can then be purged after each release...
===========================================================================================



DONE input base in no "config" in objects
DONE drawable groups should be able to have non L objects
DONE need to merge Group and DrawableObject
DONE path linestyle should not directly use GX*
DONE edit current doc settings not calling up editor!!
DONE update webpage with current svn repo
DONE optimize pdf especially... too much duplication!!
DONE in tiled, can no longer select objects in the other tiles, wtf!!!

DONE RulerWindow::smallnumbers font swapping is flooding debug info

DONE selecting fails for meshes!!! Grrrr!
DONE color mesh memory corruption
DONE patch moving things frelled, load monkey.doc and try to move things



